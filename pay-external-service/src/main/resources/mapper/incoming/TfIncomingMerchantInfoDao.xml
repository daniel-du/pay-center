<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tfjt.pay.external.unionpay.dao.TfIncomingMerchantInfoDao">


    <select id="queryMerchantById"
            resultType="com.tfjt.pay.external.unionpay.dto.resp.IncomingMerchantRespDTO">
        select a.id,a.incoming_id,a.shop_short_name,a.legal_mobile,a.agent_mobile,
         a.legal_id_card,a.agent_id_card,c.`name` legalName,
        c.nationality legalNationality,c.id_no legalIdNo,c.front_id_card_url legalFrontIdCardUrl,c.back_id_card_url legalBackIdCardUrl,
        c.hold_id_card_url legalHoldIdCardUrl,c.id_effective_date legalIdEffectiveDate,c.id_expiry_date legalIdExpiryDate,
        c.is_long_term legalIdIsLongTerm,d.`name` agentName,d.id_no agentIdNo,d.id_effective_date agentIdEffectiveDate,
        d.front_id_card_url agentFrontIdCardUrl,d.back_id_card_url agentBackIdCardUrl,
        d.id_expiry_date agentIdExpiryDate,d.is_long_term agentIdIsLongTerm
        from tf_incoming_merchant_info a
        left join tf_incoming_info b on a.incoming_id = b.id and a.is_deleted = 0
        left join tf_idcard_info c on a.legal_id_card = c.id and c.is_deleted = 0
        left join tf_idcard_info d on a.agent_id_card= d.id and d.is_deleted = 0
        where b.id = #{id} ;
    </select>
</mapper>