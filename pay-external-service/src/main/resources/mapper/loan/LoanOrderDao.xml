<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tfjt.pay.external.unionpay.dao.LoanOrderDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.tfjt.pay.external.unionpay.entity.LoanOrderEntity" id="payLoanOrderMap">
        <result property="id" column="id"/>
        <result property="tradeOrderNo" column="trade_order_no"/>
        <result property="businessOrderNo" column="business_order_no"/>
        <result property="payBalanceAcctId" column="pay_balance_acct_id"/>
        <result property="remark" column="remark"/>
        <result property="metadata" column="metadata"/>
        <result property="combinedGuaranteePaymentId" column="combined_guarantee_payment_id"/>
        <result property="createAt" column="create_at"/>
        <result property="finishedAt" column="finished_at"/>
        <result property="status" column="status"/>
        <result property="appId" column="app_id"/>
        <result property="businessType" column="business_type"/>
    </resultMap>
    <select id="listNotConfirmOrder" resultType="com.tfjt.pay.external.unionpay.entity.LoanOrderEntity">
        select * from tf_loan_order  o
        where o.create_at &gt;= #{date} and `status`='succeeded'
          and o.id in (
            select order_id from tf_loan_order_details where confirm_status = 0

        )
    </select>
    <select id="getServiceFeeOrder" resultType="com.tfjt.pay.external.unionpay.entity.LoanOrderEntity">
        select  distinct o.*
        from tf_loan_order as o
                 inner join tf_loan_order_details as d on o.id = d.order_id
                 inner join tf_loan_order_goods as g on d.id = g.details_id
        where g.product_name = '服务费'
          and o.trade_order_no = #{outOrderNo}
    </select>


</mapper>
